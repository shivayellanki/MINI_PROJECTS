<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Calculator</title>
<style>
  body{font-family:system-ui,Segoe UI,Roboto,Arial;margin:30px;background:#eef2ff;color:#111}
  .wrap{max-width:360px;margin:auto}
  .screen{background:#fff;padding:12px;border-radius:8px;text-align:right;font-size:28px;box-shadow:0 6px 18px rgba(12,12,20,0.06)}
  .keys{display:grid;grid-template-columns:repeat(4,1fr);gap:8px;margin-top:12px}
  button{padding:14px;border-radius:8px;border:0;font-size:18px;cursor:pointer;box-shadow:0 2px 6px rgba(12,12,20,0.06)}
  .op{background:#0b6efd;color:white}
  .num{background:#fff}
  .wide{grid-column:span 2}
  a{display:block;margin-top:12px;color:#063a8a}
</style>
</head>
<body>
<div class="wrap">
  <div class="screen" id="screen">0</div>
  <div class="keys">
    <button class="op" data-op="C">C</button>
    <button data-op="±">±</button>
    <button data-op="%">%</button>
    <button class="op" data-op="/">÷</button>
    <button class="num" data-num="7">7</button>
    <button class="num" data-num="8">8</button>
    <button class="num" data-num="9">9</button>
    <button class="op" data-op="*">×</button>
    <button class="num" data-num="4">4</button>
    <button class="num" data-num="5">5</button>
    <button class="num" data-num="6">6</button>
    <button class="op" data-op="-">−</button>
    <button class="num" data-num="1">1</button>
    <button class="num" data-num="2">2</button>
    <button class="num" data-num="3">3</button>
    <button class="op" data-op="+">+</button>
    <button class="num wide" data-num="0">0</button>
    <button class="num" data-num=".">.</button>
    <button class="op" data-op="=">=</button>
  </div>
  <a href="index.html">← Back to index</a>
</div>
<script>
(() => {
  const screen = document.getElementById('screen')
  let current = '0', prev = null, op = null, overwrite = false

  function update() { screen.textContent = current }
  function inputNum(n){
    if(overwrite){ current = n==='.'? '0.' : n; overwrite=false; return }
    if(n==='.' && current.includes('.')) return
    current = current === '0' && n !== '.' ? n : current + n
  }
  function applyOp(nextOp){
    const x = parseFloat(prev), y = parseFloat(current)
    if(prev === null) { prev = current; op = nextOp; overwrite=true; return }
    let res = 0
    switch(op){
      case '+': res = x + y; break
      case '-': res = x - y; break
      case '*': res = x * y; break
      case '/': res = y === 0 ? 'Error' : x / y; break
      default: res = y
    }
    current = String(res)
    prev = current
    op = nextOp==='='? null : nextOp
    overwrite = true
  }

  document.querySelectorAll('button[data-num]').forEach(b=>b.addEventListener('click', ()=>{ inputNum(b.dataset.num); update() }))
  document.querySelectorAll('button[data-op]').forEach(b=>b.addEventListener('click', ()=>{
    const o = b.dataset.op
    if(o === 'C'){ current='0'; prev=null; op=null; overwrite=false; update(); return }
    if(o === '±'){ current = String(parseFloat(current) * -1); update(); return }
    if(o === '%'){ current = String(parseFloat(current) / 100); update(); return }
    if(o === '='){ applyOp('='); update(); return }
    applyOp(o); update();
  }))

  // Keyboard support
  window.addEventListener('keydown', (e)=>{
    const key = e.key
    if(/[0-9]/.test(key)) inputNum(key)
    else if(key === '.') inputNum('.')
    else if(key === 'Enter' || key === '=') applyOp('=')
    else if(key === '+'||key==='-'||key==='*'||key==='/') applyOp(key)
    else if(key === 'Backspace'){ current = current.slice(0,-1) || '0' }
    else if(key.toLowerCase() === 'c'){ current='0'; prev=null; op=null }
    update()
  })

  update()
})()
</script>
</body>
</html>
